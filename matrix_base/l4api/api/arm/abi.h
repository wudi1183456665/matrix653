/*********************************************************************************************************
**
**                                    中国软件开源组织
**
**                                嵌入式 L4 微内核操作系统
**
**                                SylixOS(TM)  MX : matrix
**
**                               Copyright All Rights Reserved
**
**--------------文件信息--------------------------------------------------------------------------------
**
** 文   件   名: api.h
**
** 创   建   人: Cheng.Yongbin (程永斌)
**
** 文件创建日期: 2018 年 2 月 1 日
**
** 描        述: ABI 接口
*********************************************************************************************************/
#ifndef __T_ABI_H
#define __T_ABI_H

/*********************************************************************************************************
  系统调用
*********************************************************************************************************/
VOID  MX_Syscall10(ULONG   ulArg0);
VOID  MX_Syscall41(ULONG   ulArg0,
                   ULONG   ulArg1,
                   ULONG   ulArg2,
                   ULONG   ulArg3,
                   ULONG  *pulOut0);
VOID  MX_Syscall42(ULONG   ulArg0,
                   ULONG   ulArg1,
                   ULONG   ulArg2,
                   ULONG   ulArg3,
                   ULONG  *pulOut0,
                   ULONG  *pulOut1);

/*********************************************************************************************************
  设置 Arg0 中的系统调用号
*********************************************************************************************************/
#define ABI_CALLID_SET(pulArg0, ucCallId)       ((PMX_SC_ARG0)pulArg0)->SCARG0_ucCallId = ucCallId
/*********************************************************************************************************
  设置 Arg0 中的操作码
*********************************************************************************************************/
#define ABI_OPCODE_SET(pulArg0, ucOpCode)       ((PMX_SC_ARG0)pulArg0)->SCARG0_ucOpCode = ucOpCode
/*********************************************************************************************************
  获取 Arg0 中的错误码
*********************************************************************************************************/
#define ABI_RESULT_GET(pulArg0)                 ((PMX_SC_ARG0)pulArg0)->SCARG0_ucResult
/*********************************************************************************************************
  设置 64 位的时间值到 Arg2, Arg3 参数
*********************************************************************************************************/
#define ABI_SCTIME_SET(ulArg2, ulArg3, ullTime) do { \
                                                    ulArg2 = (UINT32)(ullTime);         \
                                                    ulArg3 = (UINT32)(ullTime >> 32);   \
                                                } while (0)

#endif                                                                  /*  __ABI_H                     */
/*********************************************************************************************************
  END
*********************************************************************************************************/

